buildscript {
  repositories {
    mavenCentral()
  }
  dependencies {
    classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.5.2.RELEASE'
    classpath 'io.spring.gradle:dependency-management-plugin:0.5.2.RELEASE'
  }
}

apply plugin: 'idea'

allprojects {
  apply plugin: 'java'
  sourceCompatibility = 1.8
  targetCompatibility = 1.8
}

subprojects {
  apply plugin: 'application'
  apply plugin: 'org.springframework.boot'
  apply plugin: 'io.spring.dependency-management'

  repositories {
    mavenCentral()
  }

  dependencyManagement {
    imports {
      mavenBom "org.springframework.cloud:spring-cloud-dependencies:Camden.SR5"
    }
  }
 
  dependencies {
    compile 'org.springframework.boot:spring-boot-starter-web'
    compile("org.springframework.boot:spring-boot-starter-actuator")
    compile 'org.springframework.cloud:spring-cloud-starter-hystrix'
    testCompile('junit:junit')
  }
}

task printJars() {
  def jars = ['applications/service-client/build/libs/applications/service-client.jar', 'applications/service-server/build/libs/applications/service-server.jar']

  jars.each { jar ->
    println "nohup java -jar ${jar} &"
  }
}
